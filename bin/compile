#!/bin/sh

BUILD_DIR=$1
CACHE_DIR=$2

#echo "-----> Checking whether mecab dir exists"
#echo `ls /app/.apt/usr/bin/mecab-config`

#echo "-----> What's 'pwd'?"
#echo `pwd`

#echo "-----> What are the args?"
#echo $1
#echo $2
#echo $3

#echo "-----> Does arg1 exist? Does /app?"
#echo `ls $1`
#echo `ls /app`

#echo "-----> Creating /app/mecab-ipadic-neologd"
#mkdir /app/mecab-ipadic-neologd

#echo "-----> Dirs created?"
#echo `ls /app/mecab-ipadic-neologd`

#echo "-----> Going in /app"
#cd /app

#echo "-----> What's up in here?"
#echo `ls .`

echo "-----> Cloning mecab-ipadic-NEologd repository"
git clone --depth 1 https://github.com/neologd/mecab-ipadic-neologd.git

#echo "-----> What's up now?"
#echo `ls -a .`
#echo `ls -a /app`

#echo "-----> Checking .apt in build dir"
#echo `ls $BUILD_DIR/.apt`

#echo "-----> Cloning presumably done"

#echo "-----> Checking mecab-config in BUILD_DIR"
#echo `ls $BUILD_DIR/.apt/usr/bin/mecab-config`

echo "-----> Modifying mecab-config to work with $BUILD_DIR/.apt/usr as base dir"
sed -i 's/\/usr/$BUILD_DIR\/\.apt\/usr/' $BUILD_DIR/.apt/usr/bin/mecab-config

echo "-----> Installing mecab-ipadic-neologd"
mecab-ipadic-neologd/bin/install-mecab-ipadic-neologd -y -n -u `whoami`
